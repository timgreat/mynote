## 命令行的艺术

### Basic

- 重定向命令`>`、`>>`、`<`及管道命令`|`，标准文件：

```shell
#将命令的输出重定向到文件中
command > file
#追加到文件末尾
command >> file
#将文件作为命令输入
command < file

##标准输入文件stdin 文件描述符0；标准输出文件stdout 文件描述符1；标准错误输出stderr 文件描述符2
#将文件描述符为n的文件重定向到file
command n>file
```

- 通配符与转义字符：

**`?`代表单个字符**

**`*`代表任意数量字符**

**`[...]`代表匹配方括号中的任意一个字符**

**单引号原样输出所有字符，不发生转义**

**双引号则更为宽松，对于大部分特殊字符都都会原样输出，但是对于`$`，`` ` ``，`\`仍有特殊含义。**    ***双引号还有一个作用，就是保存原始命令的输出格式。***

- 任务管理工具：

**`&`放在命令的末尾可以将任务放到后台执行**

**`jobs`可以显示当前终端正在运行的进程，包括前台和后台进程**

**`fg`命令可以将后台运行的进程任务放到前台运行，根据 jobs 命令提供的进程任务序号，再在前面加上 % 符号，就可以把相应的进程任务放到前台运行，如果任务是暂停状态也会被启动起来**

```shell
[root@VM-0-13-centos ~]# fg %1
php job.php
```

**`bg`命令会将任务放到后台执行，如果任务是暂停状态也会被启动起来**

**ctrl+z可以将前台运行的任务暂停，而ctrl+c则是将前台运行的任务终止**

- 文件管理工具

**`tail -f`输出文件最后10行，并实时监视文件的增长**

**`less +F`用于当文件持续写入内容很多时，监视文件的增长**

**硬链接相当于原文件的副本有相同的inode，而软链接相当于快捷方式，inode不同，可以跨文件系统访问，硬链接不可以**

![image-20230914230934705](/home/timi/.config/Typora/typora-user-images/image-20230914230934705.png)

**`chown` 将指定文件的拥有者改为指定的用户或组**

```shell
chown user[:group] file
```

**`du`用于显示目录或文件大小。**

```shell
#计算当前目录下所有文件大小之和
du -sh *
#-s代表计算总和
#-h代表以K、M、G为单位
#--max-depth=n 表示超过指定层数的目录后，忽略不计

#展示当前目录下文件的大小，以K、M、G为单位
ls -lh
```

**`df`用于管理磁盘分区**

```shell
#查看磁盘空间的使用情况（以千字节计）
df -k
#也可以使用
df -h
```

**`mount`**

```shell
#mount命令可以查看当前系统所挂在的硬件设备
mount
#也可以用来挂载硬件或分区（可指定文件系统）
#mount [-t file_system_type] device_to_mount directory_to_mount_to
mount [-t iso9660] /dev/cdrom /mnt/cdrom
#可以通过umount来卸载硬件
umount /dev/cdrom
```

**`fdisk`**

```shell
#列出全部的硬件及硬件分区
fdisk -l
#进入硬盘操作模式
fdisk /dev/sdb
#p列出分区表
#d删除分区
#n添加分区
#q不保存退出
#w保存退出
```

**`mkfs`用来在特定的分区创建文件系统**

**在挂载使用硬盘空间前的最后一步，运维人员需要对整块硬盘或指定分区进行格式化文件系统操作**

```shell
#对指定的硬盘或分区格式化文件系统
mkfs -t ext4 /dev/sdb
```

![image-20230915130341548](/home/timi/.config/Typora/typora-user-images/image-20230915130341548.png)

***图片中最后两个过程反了。***

**`lsblk`用于查看系统的磁盘使用情况**

- 网络管理工具

**`ip`命令的功能是用于显示与配置网卡参数**

**ip命令除了常规操作外，还可以对主机的路由、网络设备、策略路由以及隧道信息进行查看。**

```shell
#显示当前网络设备运行状态
ip link
#显示当前核心路由表信息
ip toute list
```

**`ifconfig`用于显示或设置网络设备参数信息**

**格式：**

ifconfig [参数] [网卡名] [动作]
**参数：**

-a 显示所有网卡状态 

-s 显示简短状态列表 

-v 显示执行过程详细信息
**动作：**

add 设置网络设备的IP地址 

del 删除网络设备的IP地址 

down 关闭指定的网络设备 

up 启动指定的网络设备

- 版本控制系统
- 正则表达式

**`grep`**

**参数：**

-i 忽略关键词大小写

-o 显示匹配词距文件头部的偏移量

-v 显示不包含匹配文本的所有行

-A 显示匹配指定内容及之后的n行

-B 显示匹配指定内容及之前的n行

-C  显示匹配指定内容及其前后各n行